<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Train Timing – pakrail.online</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">

<style>
body {
  font-family: Arial;
  margin: 0;
  background: #f2f2f2;
}

/* HEADER */
header {
  background: #2e7d32;
  color: white;
  padding: 15px;
  text-align: center;
  font-size: 22px;
}

/* NAV */
nav {
  background-color: rgba(0, 0, 50, 0.9);
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

nav a {
  color: white;
  padding: 12px 20px;
  text-decoration: none;
  font-size: 16px;
  text-align: center;
}

nav a:hover {
  background-color: #1a237e;
}

/* GOOGLE ADS */
.ad-container {
  width: 100%;
  max-width: 1200px;
  margin: 15px auto;
  text-align: center;
  background: #ffffff;
  padding: 10px;
  border: 1px dashed #ccc;
  font-size: 14px;
  color: #666;
}

/* SEARCH PANEL */
.panel {
  background: navy;
  padding: 15px;
  color: white;
  text-align: center;
}

button {
  padding: 8px;
  width: 90%;
  max-width: 400px;
  margin: 5px auto;
  display: block;
  cursor: pointer;
}

/* TABLE */
table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  margin-top: 15px;
}

th, td {
  border: 1px solid #ccc;
  padding: 8px;
}

th {
  background: #333;
  color: white;
}

#trainTitle {
  margin-top: 15px;
  font-weight: bold;
  text-align: center;
}

/* RESPONSIVE */
@media (max-width: 768px) {
  nav {
    flex-direction: column;
  }
}

/* FOOTER */
footer {
  background:#2e7d32;
  color:#ffffff;
  padding:15px 10px;
  text-align:center;
  margin-top:40px;
}

footer a {
  color:#ffeb3b;
  text-decoration:none;
  margin:0 8px;
}
</style>
</head>

<body>

<header>PakRail.online (Train Timing)</header>

<!-- GOOGLE AD : TOP -->
<div class="ad-container">
  Google Ad (Top – Responsive)
</div>

<nav>
  <a href="index.html">Home</a>
  <a href="stations.html">Stations</a>
  <a href="timing.html">Train Timing</a>
  <a href="availSeats.html">Seat Availability</a>
  <a href="ticketing.html">Ticketing</a>
  <a href="/prtracker">Train Tracking</a>
</nav>

<div class="panel">
  <div class="dropdown-container">
    <select id="trainSelect"></select>
  </div>
  <button onclick="loadTiming()">Search</button>
</div>

<!-- GOOGLE AD : AFTER SEARCH -->
<div class="ad-container">
  Google Ad (Below Search Panel)
</div>

<div id="trainTitle"></div>

<table id="resultTable" style="display:none">
  <thead>
    <tr>
      <th>Station</th>
      <th>Arrival</th>
      <th>Departure</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- GOOGLE AD : AFTER RESULTS -->
<div class="ad-container">
  Google Ad (After Results)
</div>

<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<script>
const API = "https://script.google.com/macros/s/AKfycbya7KRQupcY_anV146gjtN0EeH6hQakjh20emQsgJqY0seA8MRV0vqst3zyE4zL2t6b/exec";
const sel = document.getElementById("trainSelect");

fetch(API + "?action=trains")
  .then(r => r.json())
  .then(data => {
    sel.innerHTML = `<option value="">Select Train...</option>`;
    data.forEach(t => {
      const opt = document.createElement("option");
      opt.value = t.id;
      opt.textContent = `${t.id} - ${t.name}`;
      sel.appendChild(opt);
    });

    new Choices(sel, {
      searchEnabled: true,
      shouldSort: false
    });
  });

function loadTiming() {
  const trainId = sel.value;
  if (!trainId) return alert("Select a train");

  fetch(API + "?action=timing&trainid=" + trainId)
    .then(r => r.json())
    .then(rows => {
      document.getElementById("resultTable").style.display = "table";
      const tbody = document.querySelector("#resultTable tbody");
      tbody.innerHTML = "";

      document.getElementById("trainTitle").innerText =
        sel.selectedOptions[0].text;

      rows.forEach(r => {
        tbody.innerHTML += `
          <tr>
            <td>${r.station}</td>
            <td>${r.arrival}</td>
            <td>${r.departure}</td>
          </tr>`;
      });
    });
}
</script>

<!-- GOOGLE AD : BOTTOM -->
<div class="ad-container">
  Google Ad (Bottom – Responsive)
</div>

<footer>
  <a href="privacy-policy.html">Privacy Policy</a> |
  <a href="disclaimer.html">Disclaimer</a> |
  <a href="about-us.html">About Us</a> |
  <a href="contact-us.html">Contact</a>
  <div style="font-size:13px;color:#dcdcdc;">
    © <span id="year"></span> pakrail.online
  </div>
</footer>

<script>
document.getElementById("year").textContent = new Date().getFullYear();
</script>

</body>
</html>
